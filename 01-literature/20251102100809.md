---
title: Kap 1.5.11 Hvordan gjøre om fra rekursjon til iterasjon
id: 20251102100847
tags: []
---

# [1.5.11]([[20250818102829]]) Hvordan gjøre om fra rekursjon til iterasjon
Teorien sier at enhver rekursiv metode kan skrives om til en iterativ versjon. Forskjellen ligger i hvordan programmet husker «hvor det var» mellom kallene.

## Hovedidé

En rekursiv metode bruker programstakken til å lagre tilstand mellom kall. \
En iterativ metode kan gjøre det samme eksplisitt med en egen stakk (f.eks. en tabell).

## Halerekursjon

Hvis siste operasjon i metoden er et rekursivt kall (halerekursjon) kan dette enkelt erstattes med en løkke.

Eksempel:\
```java
public static void kvikksortering2(int\[] a, int v, int h) {
    while (v < h) {
    	int k = Tabell.sParter(a, v, h, (v + h)/2);
		if (v < k - 1) kvikksortering2(a, v, k - 1);
		v = k + 1;
	}
}
```

## Problemet med dyp rekursjon
Rekursjonsdybden kan bli stor (opptil n−1) → risiko for stack overflow.\
Løsning: kall alltid på det korteste delintervallet først, og håndter det lengste senere.

## Iterativ kvikksort
I den iterative versjonen brukes en eksplisitt stakk til å lagre intervaller som skal behandles:
```java
public static void kvikksortering4(int\[] a) {\
	int dim = ((int)Math.ceil(Math.log(a.length + 1)/Math.log(2)) - 2);\
	int\[] s = new int\[Math.max(2, dim \* 2)];\
	int i = 0; s\[i++] = 0; s\[i++] = a.length - 1;
}
```